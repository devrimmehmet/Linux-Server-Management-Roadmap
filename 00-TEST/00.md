# ğŸ” Ubuntu Ubuntu 22.04.5 LTS â€“ SSH Kurulumu ve GÃ¼venli Port DeÄŸiÅŸikliÄŸi Rehberi

Bu dokÃ¼man, **Ubuntu Server Ubuntu 22.04.5 LTS** Ã¼zerinde **SSH servisini kurmak, gÃ¼venli hale getirmek ve farklÄ± bir port Ã¼zerinden dÄ±ÅŸ dÃ¼nyadan eriÅŸim saÄŸlamak** iÃ§in adÄ±m adÄ±m yapÄ±lmasÄ± gereken iÅŸlemleri iÃ§erir.

---

## 1ï¸âƒ£ SSH Servisini Kur ve BaÅŸlat

Ã–ncelikle SSH servisini yÃ¼kleyip aktif hale getiriyoruz:

```bash
sudo apt update
sudo apt install -y openssh-server
sudo systemctl enable ssh
sudo systemctl start ssh
```

## 2ï¸âƒ£ Sunucu IP Adresini Kontrol Et

Yerel aÄŸ IPâ€™sini Ã¶ÄŸrenmek iÃ§in:

```bash
ip a
```

ğŸ‘‰ Bizim senaryomuzda Local IP: 192.168.1.2

## 3ï¸âƒ£ Firewall (UFW) AyarlarÄ±

VarsayÄ±lan SSH kuralÄ±nÄ± aÃ§Ä±yoruz:

```bash
sudo ufw allow OpenSSH
sudo ufw enable
```

## ï¸âƒ£ SSH BaÄŸlantÄ±sÄ±nÄ± Test Et (VarsayÄ±lan Port 22)

AynÄ± aÄŸdan baÄŸlanmayÄ± test et:

```bash
ssh kullaniciadi@192.168.1.2
```

ğŸ‘‰ Bu noktada SSH default olarak 22. port Ã¼zerinden Ã§alÄ±ÅŸÄ±r.

## 5ï¸âƒ£ SSH Servis Durumunu Kontrol Et

SSHâ€™in Ã§alÄ±ÅŸÄ±p Ã§alÄ±ÅŸmadÄ±ÄŸÄ±nÄ± gÃ¶rmek iÃ§in:

```bash
sudo systemctl status ssh
```

## ï¸âƒ£ SSH Portunu DeÄŸiÅŸtir (Ã–rn: 2293)

Daha gÃ¼venli bir port kullanmak iÃ§in sshd_config dosyasÄ±nÄ± dÃ¼zenle:

```bash
sudo nano /etc/ssh/sshd_config
```

( #Port 22 ) Åu satÄ±rÄ± bul ve deÄŸiÅŸtir (baÅŸÄ±ndaki # iÅŸaretini kaldÄ±r):

```bash
Port 2293
```

## 7ï¸âƒ£ Systemd Socket Overrideâ€™Ä± Kapat

Ubuntuâ€™da SSH varsayÄ±lan olarak ssh.socket Ã¼zerinden 22. portta dinlemeye devam edebilir.
Bunu kapatmak iÃ§in:

```bash
sudo systemctl stop ssh.socket
sudo systemctl disable ssh.socket

```

## 8ï¸âƒ£ Firewallâ€™u Yeni Porta GÃ¶re DÃ¼zenle

Yeni portu aÃ§Ä±p, 22â€™yi kapatÄ±yoruz:

```bash
sudo ufw allow 2293/tcp
sudo ufw delete allow 22/tcp
sudo ufw reload
```

## 9ï¸âƒ£ SSH Servisini Yeniden BaÅŸlat

DeÄŸiÅŸikliklerin uygulanmasÄ± iÃ§in servisi yeniden baÅŸlatÄ±yoruz:

```bash
sudo systemctl restart ssh
```

Durumu tekrar kontrol et:

```bash
sudo ss -tulpn | grep ssh
```

ğŸ‘‰ Ã‡Ä±ktÄ±da artÄ±k 0.0.0.0:2293 gÃ¶rmelisin.

## ğŸ”Ÿ AynÄ± AÄŸdan Test Et

```bash
ssh devrimmehmet@192.168.1.2 -p 2293
```

## 1ï¸âƒ£1ï¸âƒ£ Modem NAT (Port Forwarding) AyarÄ±

DÄ±ÅŸ dÃ¼nyadan eriÅŸim iÃ§in modemden NAT kuralÄ± aÃ§:

```bash
WAN (DÄ±ÅŸ IP): 159.146.105.13
Port (DÄ±ÅŸ): 2293

LAN (Sunucu IP): 192.168.1.2

Port (Hedef): 2293
```

## 1ï¸âƒ£2ï¸âƒ£ DÄ±ÅŸ DÃ¼nyadan Test Et

ArtÄ±k baÅŸka bir aÄŸdan ÅŸu komutla baÄŸlanabilirsin:

```bash
ssh devrimmehmet@159.146.105.13 -p 2293
```

## 1ï¸âƒ£3ï¸âƒ£ ğŸ”‘ SSH Key Authentication (Åifreyi Kapat, Sadece Anahtar ile GiriÅŸ)

### 1ï¸âƒ£ Windowsâ€™ta SSH AnahtarÄ± OluÅŸtur

PowerShellâ€™de:

```bash
ssh-keygen -t ed25519 -C "devrimmehmet"
```

ğŸ‘‰ Anahtarlar ÅŸu dizine kaydedilir:

```bash
C:\Users\<username>\.ssh\id_ed25519 (private key)
C:\Users\<username>\.ssh\id_ed25519.pub (public key)
```

### 2ï¸âƒ£ Public Keyâ€™i Ubuntuâ€™ya Kopyala

```bash
scp -P 2293 C:\Users\<username>\.ssh\id_ed25519.pub devrimmehmet@192.168.1.2:/home/devrimmehmet/
```

```bash
scp -P 2293 C:\Users\devri\.ssh\id_ed25519.pub devrimmehmet@192.168.1.2:/home/devrimmehmet/
```

Ubuntuâ€™da:

```bash
mkdir -p ~/.ssh
mv ~/id_ed25519.pub ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
chmod 700 ~/.ssh
```

### 3ï¸âƒ£ SSH KonfigÃ¼rasyonunu DÃ¼zenle

```bash
sudo nano /etc/ssh/sshd_config
```

Åu satÄ±rlarÄ±n olduÄŸundan emin ol:

```bash
Port 2293
PubkeyAuthentication yes
PasswordAuthentication no
PermitRootLogin no
```

### 4ï¸âƒ£ SSH Servisini Yeniden BaÅŸlat

```bash
sudo systemctl restart ssh
```

### 5ï¸âƒ£ Test Et

Windows PowerShellâ€™den:

```bash
ssh -p 2293 devrimmehmet@159.146.105.13
```

ğŸ‘‰ EÄŸer key authentication baÅŸarÄ±lÄ±ysa ÅŸifre sormadan giriÅŸ yapacaksÄ±n.

## ğŸ›¡ï¸ Ekstra GÃ¼venlik

Fail2ban Kur (brute force saldÄ±rÄ±lara karÅŸÄ±):

```bash
sudo apt install fail2ban -y
```

Root login kapalÄ± (zaten PermitRootLogin no).

Sadece key ile giriÅŸ aktif (PasswordAuthentication no).

âœ… SonuÃ§

SSH servisi kuruldu ve gÃ¼venli port 2293 Ã¼zerinden Ã§alÄ±ÅŸÄ±yor.

22. port kapatÄ±ldÄ± ve sadece yeni port Ã¼zerinden eriÅŸim saÄŸlanÄ±yor.

Modem NAT kuralÄ± ile dÄ±ÅŸ dÃ¼nyadan baÄŸlanmak mÃ¼mkÃ¼n hale geldi.

SSH portu 2293 Ã¼zerinden gÃ¼venli ÅŸekilde Ã§alÄ±ÅŸÄ±yor.

Parola ile giriÅŸ devre dÄ±ÅŸÄ± â†’ sadece key ile baÄŸlanÄ±labiliyor.

Modem NAT sayesinde dÄ±ÅŸ IP Ã¼zerinden her yerden eriÅŸim mÃ¼mkÃ¼n.

Fail2ban ile ek koruma saÄŸlandÄ±.
